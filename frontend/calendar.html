<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"> <!-- Sets character encoding for the document -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ensures responsive design on various devices -->
        <title>Plant Simulation Results</title> <!-- Title of the webpage displayed in the browser tab -->
        <link rel="icon" href="css/img/the_guy.png" type="image/png"> <!-- Favicon for the webpage -->
        <script type="text/javascript" src="js/themeToggle.js"></script> <!--Connects Javascript for theme switching-->
        <style>
            .calendar-wrapper {
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
            }
            .calendar {
                width: 300px;
                background: white;
                border: 1px solid #ddd;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                justify-content: center;
                align-items: center;
            }
    
            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px;
                background: #007BFF;
                color: white;
            }
    
            .header button {
                background: none;
                border: none;
                color: white;
                font-size: 16px;
                cursor: pointer;
            }
    
            .days, .dates {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                text-align: center;
            }
    
            .day {
                font-weight: bold;
                padding: 10px 0;
                background: #f1f1f1;
            }
    
            .date {
                padding: 10px;
                cursor: pointer;
                transition: background 0.2s;
                position: relative;
            }
    
            .date:hover {
                background: #ddd;
            }
    
            .date.today {
                background: #007BFF;
                color: white;
                border-radius: 50%;
            }
    
            .event {
                font-size: 10px;
                color: #555;
                background: #e3f2fd;
                border-radius: 4px;
                padding: 2px 4px;
                position: absolute;
                bottom: 4px;
                left: 50%;
                transform: translateX(-50%);
                cursor: pointer;
            }
    
            .event-input {
                display: none;
                flex-direction: column;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                padding: 20px;
                border: 1px solid #ddd;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
            }
    
            .event-input input {
                margin-bottom: 10px;
                padding: 8px;
                font-size: 14px;
                border: 1px solid #ddd;
                border-radius: 4px;
            }
    
            .event-input button {
                padding: 8px;
                border: none;
                color: white;
                background: #007BFF;
                cursor: pointer;
                border-radius: 4px;
            }
    
            .event-input button.cancel {
                background: #555;
            }
        </style>
        <link id="theme" rel="stylesheet" type="text/css" href="css/general.css" /> <!--Connects default CSS for theme switching-->
    </head>
<body>
    <button class="themeButton" onclick="toggleTheme()"></button> <!--Calls Javascript function to change css theme when button is pressed-->
    <div class="container"> <!-- Container for the page content -->
    <h1>Calendar</h1> <!-- Main heading of the page -->
    </div>
    <div class="calendar-wrapper">
        <div class="calendar">
            <div class="header">
                <button id="prev">❮</button>
                <span id="monthYear"></span>
                <button id="next">❯</button>
            </div>
            <div class="days">
                <div class="day">Sun</div>
                <div class="day">Mon</div>
                <div class="day">Tue</div>
                <div class="day">Wed</div>
                <div class="day">Thu</div>
                <div class="day">Fri</div>
                <div class="day">Sat</div>
            </div>
            <div id="dates" class="dates"></div>
        </div>

        <div id="eventInput" class="event-input">
            <input id="eventText" type="text" placeholder="Enter event">
            <button id="addEvent">Add Event</button>
            <button id="cancelEvent" class="cancel">Cancel</button>
        </div>
    </div>
    <input id="filterable" class="homeButton" type="image" src="css/img/the_guy.png" onclick="window.location.href='home.html'"Home/> <!--Mandrake Button to go home and able to change look of-->
    <script>
        const monthYear = document.getElementById("monthYear");
        const dates = document.getElementById("dates");
        const prev = document.getElementById("prev");
        const next = document.getElementById("next");
        const eventInput = document.getElementById("eventInput");
        const eventText = document.getElementById("eventText");
        const addEvent = document.getElementById("addEvent");
        const cancelEvent = document.getElementById("cancelEvent");

        let currentDate = new Date();
        let events = {}; // Object to store events
        let selectedDate = null;

        function renderCalendar(date) {
            dates.innerHTML = "";
            const year = date.getFullYear();
            const month = date.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();

            const options = { month: "long", year: "numeric" };
            monthYear.textContent = new Intl.DateTimeFormat("en-US", options).format(date);

            for (let i = 0; i < firstDay; i++) {
                const blank = document.createElement("div");
                blank.className = "date";
                dates.appendChild(blank);
            }

            for (let day = 1; day <= lastDate; day++) {
                const dateDiv = document.createElement("div");
                dateDiv.className = "date";
                if (
                    day === new Date().getDate() &&
                    month === new Date().getMonth() &&
                    year === new Date().getFullYear()
                ) {
                    dateDiv.classList.add("today");
                }
                dateDiv.textContent = day;

                const eventKey = `${year}-${month}-${day}`;
                if (events[eventKey]) {
                    const eventDiv = document.createElement("div");
                    eventDiv.className = "event";
                    eventDiv.textContent = events[eventKey];
                    dateDiv.appendChild(eventDiv);
                }

                dateDiv.addEventListener("click", () => {
                    selectedDate = eventKey;
                    eventInput.style.display = "flex";
                });

                dates.appendChild(dateDiv);
            }
        }

        prev.addEventListener("click", () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar(currentDate);
        });

        next.addEventListener("click", () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar(currentDate);
        });

        addEvent.addEventListener("click", () => {
            if (selectedDate && eventText.value.trim()) {
                events[selectedDate] = eventText.value.trim();
                eventText.value = "";
                eventInput.style.display = "none";
                renderCalendar(currentDate);
            }
        });

        cancelEvent.addEventListener("click", () => {
            eventText.value = "";
            eventInput.style.display = "none";
        });

        renderCalendar(currentDate);
    </script>
</body>
</html>
