<!DOCTYPE html>
<html lang="en">
<head>
    <title>Don't Kill Plants</title>
    <link rel="icon" href="img/the_guy.png" type="image/png">
    <link rel="stylesheet" href="css/general.css">
</head>
<body>
    <div class="container">
        <div class="box" style="height: 500px; width: 500px;">
            <h1 style="text-align: center;">View Simulations</h1>
            <div id="simulations"></div>
        </div>
    </div>

    <script>
        // Retrieve user ID from localStorage (or session, based on your setup)
        const userId = localStorage.getItem('userId'); // Make sure to store the userId on successful login

        if (userId) {
            // Fetch simulations for the user
            fetch(`http://localhost:5100/simulations/${userId}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Failed to fetch simulations");
                    }
                    return response.json();
                })
                .then(data => {
                    const simulationsDiv = document.getElementById('simulations');
                    if (data.length > 0) {
                        data.forEach(simulation => {
                            const button = document.createElement('button');
                            button.innerText = `Plant ID: ${simulation.plant_id}`;
                            button.onclick = () => {
                                // Add functionality when button is clicked (e.g., view details)
                                alert(`You clicked on Plant ID: ${simulation.plant_id}`);
                            };
                            simulationsDiv.appendChild(button);
                        });
                    } else {
                        simulationsDiv.innerHTML = '<p>No simulations found.</p>';
                    }
                })
                .catch(error => {
                    console.error('Error fetching simulations:', error);
                    document.getElementById('simulations').innerHTML = '<p>Error retrieving simulations. Please try again.</p>';
                });
        } else {
            document.getElementById('simulations').innerHTML = '<p>User not logged in. Please log in to see simulations.</p>';
        }
    </script>
</body>
</html>
